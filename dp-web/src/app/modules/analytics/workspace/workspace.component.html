<!--
  ~   HORTONWORKS DATAPLANE SERVICE AND ITS CONSTITUENT SERVICES
  ~
  ~   (c) 2016-2018 Hortonworks, Inc. All rights reserved.
  ~
  ~   This code is provided to you pursuant to your written agreement with Hortonworks, which may be the terms of the
  ~   Affero General Public License version 3 (AGPLv3), or pursuant to a written agreement with a third party authorized
  ~   to distribute this code.  If you do not have a written agreement with Hortonworks or with an authorized and
  ~   properly licensed third party, you do not have any rights to this code.
  ~
  ~   If this code is provided to you under the terms of the AGPLv3:
  ~   (A) HORTONWORKS PROVIDES THIS CODE TO YOU WITHOUT WARRANTIES OF ANY KIND;
  ~   (B) HORTONWORKS DISCLAIMS ANY AND ALL EXPRESS AND IMPLIED WARRANTIES WITH RESPECT TO THIS CODE, INCLUDING BUT NOT
  ~     LIMITED TO IMPLIED WARRANTIES OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE;
  ~   (C) HORTONWORKS IS NOT LIABLE TO YOU, AND WILL NOT DEFEND, INDEMNIFY, OR HOLD YOU HARMLESS FOR ANY CLAIMS ARISING
  ~     FROM OR RELATED TO THE CODE; AND
  ~   (D) WITH RESPECT TO YOUR EXERCISE OF ANY RIGHTS GRANTED TO YOU FOR THE CODE, HORTONWORKS IS NOT LIABLE FOR ANY
  ~     DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, PUNITIVE OR CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO,
  ~     DAMAGES RELATED TO LOST REVENUE, LOST PROFITS, LOSS OF INCOME, LOSS OF BUSINESS ADVANTAGE OR UNAVAILABILITY,
  ~     OR LOSS OR CORRUPTION OF DATA.
  -->

<div class="page-container">
    <div class="hwx-title-panel">
      <div class="mdl-grid mdl-grid--no-spacing ">
        <div class="mdl-cell--2-col hwx-title"> {{ "pages.analytics.workspace.title" | translate }} | {{ workspacesDTOS.length }} </div>
        <div class="mdl-layout-spacer"> </div>
        <div class="actions">
          <div class="dp-input">
            <input type="text" placeholder="Search" name="name" id="search">
            <i class="fa fa-search dp-input__icon" aria-hidden="true"></i>
          </div>

          <dp-tabs [tabEnum]="toggleView" [tabType]="tabType.LAYOUT" [images]="tabImages" (selected)="selectedViewType=$event"> </dp-tabs>

          <button class="mdl-button btn-hwx-primary" (click)="addWorkspace()"> {{ "pages.analytics.workspace.create-workspace" | translate }} </button>
        </div>
      </div>
    </div>

    <div class="card-container" *ngIf="selectedViewType===toggleView.GRID">
        <div class=" mdl-card" *ngFor="let workspacesDTO of workspacesDTOS" (click)="editWorkspace($event, workspacesDTO)">
            <div class="mdl-card__title">
                <div class="card-title"> {{ workspacesDTO.workspace.name }}</div>
                <div class="card-title-sub"><span>Source: </span> <b> {{ workspacesDTO.clustername }} </b></div>
            </div>
            <div class="mdl-card__supporting-text">
                <div class="card-owner"> Owner: {{ workspacesDTO.username }}
                </div>
                <div *ngIf="workspacesDTO.users > 0" class="card-icons pull-right"> {{ workspacesDTO.users }} <i class="fa fa-users" aria-hidden="true"></i></div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <div class="mdl-grid mdl-grid--no-spacing">
                    <div class="mdl-cell--4-col card-count border borderBox"> TABLES <br> {{ workspacesDTO.counts.asset ? workspacesDTO.counts.asset : '-'  }}</div>
                    <div class="mdl-cell--4-col card-count border borderBox"> NOTEBOOKS <br> {{ workspacesDTO.counts.notebook ? workspacesDTO.counts.notebook : '-' }}</div>
                    <div class="mdl-cell--4-col card-count borderBox"> JOBS <br> - </div>
                </div>
            </div>
            <div class="mdl-card__menu">
                <button [attr.id]="workspacesDTO.workspace.name" class="mdl-button mdl-button--icon"> <i class="fa fa-ellipsis-v" aria-hidden="true"></i> </button>
                <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" [attr.for]="workspacesDTO.workspace.name">
                    <li class="mdl-menu__item" (click)="delete(workspacesDTO.workspace.name)"> Delete </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="table-container" *ngIf="selectedViewType===toggleView.TABLE">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
            <th class="mdl-data-table__cell--non-numeric">Name</th>
            <th class="mdl-data-table__cell--non-numeric">Source</th>
            <th class="mdl-data-table__cell--non-numeric">Owner</th>
            <th class="mdl-data-table__cell--non-numeric">#Tables</th>
            <th class="mdl-data-table__cell--non-numeric">#Notebooks</th>
            <th class="mdl-data-table__cell--non-numeric">#Jobs</th>
            <th class="mdl-data-table__cell--non-numeric"></th>
            </thead>
            <tbody>
            <tr *ngFor="let workspacesDTO of workspacesDTOS">
                <td class="mdl-data-table__cell--non-numeric key-column mdl-data-table__cell--non-clickable" (click)="editWorkspace($event, workspacesDTO)"> {{ workspacesDTO.workspace.name }} </td>
                <td class="mdl-data-table__cell--non-numeric mdl-data-table__cell--non-clickable"> {{ workspacesDTO.clustername }} </td>
                <td class="mdl-data-table__cell--non-numeric mdl-data-table__cell--non-clickable"> {{ workspacesDTO.username }} </td>
                <td class="mdl-data-table__cell--non-numeric mdl-data-table__cell--non-clickable">  {{ workspacesDTO.counts.asset ? workspacesDTO.counts.asset : '-'  }} </td>
                <td class="mdl-data-table__cell--non-numeric mdl-data-table__cell--non-clickable"> {{ workspacesDTO.counts.notebook ? workspacesDTO.counts.notebook : '-' }} </td>
                <td class="mdl-data-table__cell--non-numeric mdl-data-table__cell--non-clickable">  - </td>
                <td class="mdl-data-table__cell--non-numeric mdl-data-table__cell--non-clickable">
                    <button [attr.id]="workspacesDTO.workspace.name" class="mdl-button mdl-js-button mdl-button--icon"> <i class="material-icons">more_vert</i> </button>
                    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" [attr.for]="workspacesDTO.workspace.name">
                    <li class="mdl-menu__item" (click)="delete(workspacesDTO.workspace.name)"> Delete </li>
                    </ul>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<router-outlet name="dialog" ></router-outlet>
